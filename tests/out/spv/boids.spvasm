; SPIR-V
; Version: 1.0
; Generator: rspirv
; Bound: 210
OpCapability Shader
OpExtension "SPV_KHR_storage_buffer_storage_class"
%1 = OpExtInstImport "GLSL.std.450"
OpMemoryModel Logical GLSL450
OpEntryPoint GLCompute %27 "main" %24
OpExecutionMode %27 LocalSize 64 1 1
OpMemberName %6 0 "pos"
OpMemberName %6 1 "vel"
OpName %6 "Particle"
OpMemberName %7 0 "deltaT"
OpMemberName %7 1 "rule1Distance"
OpMemberName %7 2 "rule2Distance"
OpMemberName %7 3 "rule3Distance"
OpMemberName %7 4 "rule1Scale"
OpMemberName %7 5 "rule2Scale"
OpMemberName %7 6 "rule3Scale"
OpName %7 "SimParams"
OpMemberName %9 0 "particles"
OpName %9 "Particles"
OpName %12 "NUM_PARTICLES"
OpName %17 "params"
OpName %20 "particlesSrc"
OpName %22 "particlesDst"
OpName %24 "global_invocation_id"
OpName %27 "main"
OpName %38 "vPos"
OpName %41 "vVel"
OpName %43 "cMass"
OpName %44 "cVel"
OpName %45 "colVel"
OpName %46 "cMassCount"
OpName %48 "cVelCount"
OpName %49 "pos"
OpName %51 "vel"
OpName %53 "i"
OpMemberDecorate %6 0 Offset 0
OpMemberDecorate %6 1 Offset 8
OpMemberDecorate %7 0 Offset 0
OpMemberDecorate %7 1 Offset 4
OpMemberDecorate %7 2 Offset 8
OpMemberDecorate %7 3 Offset 12
OpMemberDecorate %7 4 Offset 16
OpMemberDecorate %7 5 Offset 20
OpMemberDecorate %7 6 Offset 24
OpDecorate %8 ArrayStride 16
OpMemberDecorate %9 0 Offset 0
OpDecorate %9 Block
OpDecorate %17 DescriptorSet 0
OpDecorate %17 Binding 0
OpDecorate %18 Block
OpMemberDecorate %18 0 Offset 0
OpDecorate %20 NonWritable
OpDecorate %20 DescriptorSet 0
OpDecorate %20 Binding 1
OpDecorate %22 DescriptorSet 0
OpDecorate %22 Binding 2
OpDecorate %24 BuiltIn GlobalInvocationId
%2 = OpTypeVoid
%3 = OpTypeInt 32 0
%5 = OpTypeFloat 32
%4 = OpTypeVector %5 2
%6 = OpTypeStruct %4 %4
%7 = OpTypeStruct %5 %5 %5 %5 %5 %5 %5
%8 = OpTypeRuntimeArray %6
%9 = OpTypeStruct %8
%10 = OpTypeVector %3 3
%11 = OpTypeInt 32 1
%12 = OpConstant  %3  1500
%13 = OpConstant  %11  0
%14 = OpConstant  %11  1
%15 = OpConstant  %11  2
%16 = OpConstant  %11  64
%18 = OpTypeStruct %7
%19 = OpTypePointer Uniform %18
%17 = OpVariable  %19  Uniform
%21 = OpTypePointer StorageBuffer %9
%20 = OpVariable  %21  StorageBuffer
%22 = OpVariable  %21  StorageBuffer
%25 = OpTypePointer Input %10
%24 = OpVariable  %25  Input
%28 = OpTypeFunction %2
%29 = OpTypePointer Uniform %7
%30 = OpConstant  %3  0
%32 = OpConstant  %5  0.0
%33 = OpConstantComposite  %4  %32 %32
%34 = OpConstant  %3  1
%35 = OpConstant  %5  0.1
%36 = OpConstant  %5  -1.0
%37 = OpConstant  %5  1.0
%39 = OpTypePointer Function %4
%40 = OpConstantNull  %4
%42 = OpConstantNull  %4
%47 = OpTypePointer Function %11
%50 = OpConstantNull  %4
%52 = OpConstantNull  %4
%54 = OpTypePointer Function %3
%57 = OpTypeBool
%61 = OpTypePointer StorageBuffer %8
%62 = OpTypePointer StorageBuffer %6
%63 = OpTypePointer StorageBuffer %4
%89 = OpTypePointer Uniform %5
%103 = OpConstant  %3  2
%117 = OpConstant  %3  3
%152 = OpConstant  %3  4
%158 = OpConstant  %3  5
%164 = OpConstant  %3  6
%181 = OpTypePointer Function %5
%27 = OpFunction  %2  None %28
%23 = OpLabel
%53 = OpVariable  %54  Function %30
%48 = OpVariable  %47  Function %13
%44 = OpVariable  %39  Function %33
%38 = OpVariable  %39  Function %40
%49 = OpVariable  %39  Function %50
%45 = OpVariable  %39  Function %33
%41 = OpVariable  %39  Function %42
%51 = OpVariable  %39  Function %52
%46 = OpVariable  %47  Function %13
%43 = OpVariable  %39  Function %33
%26 = OpLoad  %10  %24
%31 = OpAccessChain  %29  %17 %30
OpBranch %55
%55 = OpLabel
%56 = OpCompositeExtract  %3  %26 0
%58 = OpUGreaterThanEqual  %57  %56 %12
OpSelectionMerge %59 None
OpBranchConditional %58 %60 %59
%60 = OpLabel
OpReturn
%59 = OpLabel
%64 = OpAccessChain  %63  %20 %30 %56 %30
%65 = OpLoad  %4  %64
OpStore %38 %65
%66 = OpAccessChain  %63  %20 %30 %56 %34
%67 = OpLoad  %4  %66
OpStore %41 %67
OpBranch %68
%68 = OpLabel
OpLoopMerge %69 %71 None
OpBranch %70
%70 = OpLabel
%72 = OpLoad  %3  %53
%73 = OpUGreaterThanEqual  %57  %72 %12
OpSelectionMerge %74 None
OpBranchConditional %73 %75 %74
%75 = OpLabel
OpBranch %69
%74 = OpLabel
%76 = OpLoad  %3  %53
%77 = OpIEqual  %57  %76 %56
OpSelectionMerge %78 None
OpBranchConditional %77 %79 %78
%79 = OpLabel
OpBranch %71
%78 = OpLabel
%80 = OpLoad  %3  %53
%81 = OpAccessChain  %63  %20 %30 %80 %30
%82 = OpLoad  %4  %81
OpStore %49 %82
%83 = OpLoad  %3  %53
%84 = OpAccessChain  %63  %20 %30 %83 %34
%85 = OpLoad  %4  %84
OpStore %51 %85
%86 = OpLoad  %4  %49
%87 = OpLoad  %4  %38
%88 = OpExtInst  %5  %1 Distance %86 %87
%90 = OpAccessChain  %89  %31 %34
%91 = OpLoad  %5  %90
%92 = OpFOrdLessThan  %57  %88 %91
OpSelectionMerge %93 None
OpBranchConditional %92 %94 %93
%94 = OpLabel
%95 = OpLoad  %4  %43
%96 = OpLoad  %4  %49
%97 = OpFAdd  %4  %95 %96
OpStore %43 %97
%98 = OpLoad  %11  %46
%99 = OpIAdd  %11  %98 %14
OpStore %46 %99
OpBranch %93
%93 = OpLabel
%100 = OpLoad  %4  %49
%101 = OpLoad  %4  %38
%102 = OpExtInst  %5  %1 Distance %100 %101
%104 = OpAccessChain  %89  %31 %103
%105 = OpLoad  %5  %104
%106 = OpFOrdLessThan  %57  %102 %105
OpSelectionMerge %107 None
OpBranchConditional %106 %108 %107
%108 = OpLabel
%109 = OpLoad  %4  %45
%110 = OpLoad  %4  %49
%111 = OpLoad  %4  %38
%112 = OpFSub  %4  %110 %111
%113 = OpFSub  %4  %109 %112
OpStore %45 %113
OpBranch %107
%107 = OpLabel
%114 = OpLoad  %4  %49
%115 = OpLoad  %4  %38
%116 = OpExtInst  %5  %1 Distance %114 %115
%118 = OpAccessChain  %89  %31 %117
%119 = OpLoad  %5  %118
%120 = OpFOrdLessThan  %57  %116 %119
OpSelectionMerge %121 None
OpBranchConditional %120 %122 %121
%122 = OpLabel
%123 = OpLoad  %4  %44
%124 = OpLoad  %4  %51
%125 = OpFAdd  %4  %123 %124
OpStore %44 %125
%126 = OpLoad  %11  %48
%127 = OpIAdd  %11  %126 %14
OpStore %48 %127
OpBranch %121
%121 = OpLabel
OpBranch %71
%71 = OpLabel
%128 = OpLoad  %3  %53
%129 = OpIAdd  %3  %128 %34
OpStore %53 %129
OpBranch %68
%69 = OpLabel
%130 = OpLoad  %11  %46
%131 = OpSGreaterThan  %57  %130 %13
OpSelectionMerge %132 None
OpBranchConditional %131 %133 %132
%133 = OpLabel
%134 = OpLoad  %4  %43
%135 = OpLoad  %11  %46
%136 = OpConvertSToF  %5  %135
%137 = OpCompositeConstruct  %4  %136 %136
%138 = OpFDiv  %4  %134 %137
%139 = OpLoad  %4  %38
%140 = OpFSub  %4  %138 %139
OpStore %43 %140
OpBranch %132
%132 = OpLabel
%141 = OpLoad  %11  %48
%142 = OpSGreaterThan  %57  %141 %13
OpSelectionMerge %143 None
OpBranchConditional %142 %144 %143
%144 = OpLabel
%145 = OpLoad  %4  %44
%146 = OpLoad  %11  %48
%147 = OpConvertSToF  %5  %146
%148 = OpCompositeConstruct  %4  %147 %147
%149 = OpFDiv  %4  %145 %148
OpStore %44 %149
OpBranch %143
%143 = OpLabel
%150 = OpLoad  %4  %41
%151 = OpLoad  %4  %43
%153 = OpAccessChain  %89  %31 %152
%154 = OpLoad  %5  %153
%155 = OpVectorTimesScalar  %4  %151 %154
%156 = OpFAdd  %4  %150 %155
%157 = OpLoad  %4  %45
%159 = OpAccessChain  %89  %31 %158
%160 = OpLoad  %5  %159
%161 = OpVectorTimesScalar  %4  %157 %160
%162 = OpFAdd  %4  %156 %161
%163 = OpLoad  %4  %44
%165 = OpAccessChain  %89  %31 %164
%166 = OpLoad  %5  %165
%167 = OpVectorTimesScalar  %4  %163 %166
%168 = OpFAdd  %4  %162 %167
OpStore %41 %168
%169 = OpLoad  %4  %41
%170 = OpExtInst  %4  %1 Normalize %169
%171 = OpLoad  %4  %41
%172 = OpExtInst  %5  %1 Length %171
%173 = OpExtInst  %5  %1 FClamp %172 %32 %35
%174 = OpVectorTimesScalar  %4  %170 %173
OpStore %41 %174
%175 = OpLoad  %4  %38
%176 = OpLoad  %4  %41
%177 = OpAccessChain  %89  %31 %30
%178 = OpLoad  %5  %177
%179 = OpVectorTimesScalar  %4  %176 %178
%180 = OpFAdd  %4  %175 %179
OpStore %38 %180
%182 = OpAccessChain  %181  %38 %30
%183 = OpLoad  %5  %182
%184 = OpFOrdLessThan  %57  %183 %36
OpSelectionMerge %185 None
OpBranchConditional %184 %186 %185
%186 = OpLabel
%187 = OpAccessChain  %181  %38 %30
OpStore %187 %37
OpBranch %185
%185 = OpLabel
%188 = OpAccessChain  %181  %38 %30
%189 = OpLoad  %5  %188
%190 = OpFOrdGreaterThan  %57  %189 %37
OpSelectionMerge %191 None
OpBranchConditional %190 %192 %191
%192 = OpLabel
%193 = OpAccessChain  %181  %38 %30
OpStore %193 %36
OpBranch %191
%191 = OpLabel
%194 = OpAccessChain  %181  %38 %34
%195 = OpLoad  %5  %194
%196 = OpFOrdLessThan  %57  %195 %36
OpSelectionMerge %197 None
OpBranchConditional %196 %198 %197
%198 = OpLabel
%199 = OpAccessChain  %181  %38 %34
OpStore %199 %37
OpBranch %197
%197 = OpLabel
%200 = OpAccessChain  %181  %38 %34
%201 = OpLoad  %5  %200
%202 = OpFOrdGreaterThan  %57  %201 %37
OpSelectionMerge %203 None
OpBranchConditional %202 %204 %203
%204 = OpLabel
%205 = OpAccessChain  %181  %38 %34
OpStore %205 %36
OpBranch %203
%203 = OpLabel
%206 = OpLoad  %4  %38
%207 = OpAccessChain  %63  %22 %30 %56 %30
OpStore %207 %206
%208 = OpLoad  %4  %41
%209 = OpAccessChain  %63  %22 %30 %56 %34
OpStore %209 %208
OpReturn
OpFunctionEnd