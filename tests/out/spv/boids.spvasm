; SPIR-V
; Version: 1.0
; Generator: rspirv
; Bound: 211
OpCapability Shader
OpExtension "SPV_KHR_storage_buffer_storage_class"
%1 = OpExtInstImport "GLSL.std.450"
OpMemoryModel Logical GLSL450
OpEntryPoint GLCompute %43 "main" %40
OpExecutionMode %43 LocalSize 64 1 1
OpMemberName %6 0 "pos"
OpMemberName %6 1 "vel"
OpName %6 "Particle"
OpMemberName %7 0 "deltaT"
OpMemberName %7 1 "rule1Distance"
OpMemberName %7 2 "rule2Distance"
OpMemberName %7 3 "rule3Distance"
OpMemberName %7 4 "rule1Scale"
OpMemberName %7 5 "rule2Scale"
OpMemberName %7 6 "rule3Scale"
OpName %7 "SimParams"
OpMemberName %9 0 "particles"
OpName %9 "Particles"
OpName %12 "NUM_PARTICLES"
OpName %17 "params"
OpName %20 "particlesSrc"
OpName %22 "particlesDst"
OpName %23 "vPos"
OpName %26 "vVel"
OpName %27 "cMass"
OpName %28 "cVel"
OpName %29 "colVel"
OpName %30 "cMassCount"
OpName %33 "cVelCount"
OpName %34 "pos"
OpName %35 "vel"
OpName %36 "i"
OpName %40 "global_invocation_id"
OpName %43 "main"
OpMemberDecorate %6 0 Offset 0
OpMemberDecorate %6 1 Offset 8
OpMemberDecorate %7 0 Offset 0
OpMemberDecorate %7 1 Offset 4
OpMemberDecorate %7 2 Offset 8
OpMemberDecorate %7 3 Offset 12
OpMemberDecorate %7 4 Offset 16
OpMemberDecorate %7 5 Offset 20
OpMemberDecorate %7 6 Offset 24
OpDecorate %8 ArrayStride 16
OpMemberDecorate %9 0 Offset 0
OpDecorate %9 Block
OpDecorate %17 DescriptorSet 0
OpDecorate %17 Binding 0
OpDecorate %18 Block
OpMemberDecorate %18 0 Offset 0
OpDecorate %20 NonWritable
OpDecorate %20 DescriptorSet 0
OpDecorate %20 Binding 1
OpDecorate %22 DescriptorSet 0
OpDecorate %22 Binding 2
OpDecorate %40 BuiltIn GlobalInvocationId
%2 = OpTypeVoid
%3 = OpTypeInt 32 0
%5 = OpTypeFloat 32
%4 = OpTypeVector %5 2
%6 = OpTypeStruct %4 %4
%7 = OpTypeStruct %5 %5 %5 %5 %5 %5 %5
%8 = OpTypeRuntimeArray %6
%9 = OpTypeStruct %8
%10 = OpTypeVector %3 3
%11 = OpTypeInt 32 1
%12 = OpConstant  %3  1500
%13 = OpConstant  %11  0
%14 = OpConstant  %11  1
%15 = OpConstant  %11  2
%16 = OpConstant  %11  64
%18 = OpTypeStruct %7
%19 = OpTypePointer Uniform %18
%17 = OpVariable  %19  Uniform
%21 = OpTypePointer StorageBuffer %9
%20 = OpVariable  %21  StorageBuffer
%22 = OpVariable  %21  StorageBuffer
%24 = OpTypePointer Function %4
%25 = OpConstantNull  %4
%31 = OpTypePointer Function %11
%32 = OpConstantNull  %11
%37 = OpTypePointer Function %3
%38 = OpConstantNull  %3
%41 = OpTypePointer Input %10
%40 = OpVariable  %41  Input
%44 = OpTypeFunction %2
%45 = OpTypePointer Uniform %7
%46 = OpConstant  %3  0
%48 = OpConstant  %5  0.0
%49 = OpConstant  %3  1
%50 = OpConstant  %5  0.1
%51 = OpConstant  %5  -1.0
%52 = OpConstant  %5  1.0
%55 = OpTypeBool
%59 = OpTypePointer StorageBuffer %8
%60 = OpTypePointer StorageBuffer %6
%61 = OpTypePointer StorageBuffer %4
%90 = OpTypePointer Uniform %5
%104 = OpConstant  %3  2
%118 = OpConstant  %3  3
%153 = OpConstant  %3  4
%159 = OpConstant  %3  5
%165 = OpConstant  %3  6
%182 = OpTypePointer Function %5
%43 = OpFunction  %2  None %44
%39 = OpLabel
%36 = OpVariable  %37  Function %38
%33 = OpVariable  %31  Function %32
%28 = OpVariable  %24  Function %25
%23 = OpVariable  %24  Function %25
%34 = OpVariable  %24  Function %25
%29 = OpVariable  %24  Function %25
%26 = OpVariable  %24  Function %25
%35 = OpVariable  %24  Function %25
%30 = OpVariable  %31  Function %32
%27 = OpVariable  %24  Function %25
%42 = OpLoad  %10  %40
%47 = OpAccessChain  %45  %17 %46
OpBranch %53
%53 = OpLabel
%54 = OpCompositeExtract  %3  %42 0
%56 = OpUGreaterThanEqual  %55  %54 %12
OpSelectionMerge %57 None
OpBranchConditional %56 %58 %57
%58 = OpLabel
OpReturn
%57 = OpLabel
%62 = OpAccessChain  %61  %20 %46 %54 %46
%63 = OpLoad  %4  %62
OpStore %23 %63
%64 = OpAccessChain  %61  %20 %46 %54 %49
%65 = OpLoad  %4  %64
OpStore %26 %65
%66 = OpCompositeConstruct  %4  %48 %48
OpStore %27 %66
%67 = OpCompositeConstruct  %4  %48 %48
OpStore %28 %67
%68 = OpCompositeConstruct  %4  %48 %48
OpStore %29 %68
OpStore %30 %13
OpStore %33 %13
OpStore %36 %46
OpBranch %69
%69 = OpLabel
OpLoopMerge %70 %72 None
OpBranch %71
%71 = OpLabel
%73 = OpLoad  %3  %36
%74 = OpUGreaterThanEqual  %55  %73 %12
OpSelectionMerge %75 None
OpBranchConditional %74 %76 %75
%76 = OpLabel
OpBranch %70
%75 = OpLabel
%77 = OpLoad  %3  %36
%78 = OpIEqual  %55  %77 %54
OpSelectionMerge %79 None
OpBranchConditional %78 %80 %79
%80 = OpLabel
OpBranch %72
%79 = OpLabel
%81 = OpLoad  %3  %36
%82 = OpAccessChain  %61  %20 %46 %81 %46
%83 = OpLoad  %4  %82
OpStore %34 %83
%84 = OpLoad  %3  %36
%85 = OpAccessChain  %61  %20 %46 %84 %49
%86 = OpLoad  %4  %85
OpStore %35 %86
%87 = OpLoad  %4  %34
%88 = OpLoad  %4  %23
%89 = OpExtInst  %5  %1 Distance %87 %88
%91 = OpAccessChain  %90  %47 %49
%92 = OpLoad  %5  %91
%93 = OpFOrdLessThan  %55  %89 %92
OpSelectionMerge %94 None
OpBranchConditional %93 %95 %94
%95 = OpLabel
%96 = OpLoad  %4  %27
%97 = OpLoad  %4  %34
%98 = OpFAdd  %4  %96 %97
OpStore %27 %98
%99 = OpLoad  %11  %30
%100 = OpIAdd  %11  %99 %14
OpStore %30 %100
OpBranch %94
%94 = OpLabel
%101 = OpLoad  %4  %34
%102 = OpLoad  %4  %23
%103 = OpExtInst  %5  %1 Distance %101 %102
%105 = OpAccessChain  %90  %47 %104
%106 = OpLoad  %5  %105
%107 = OpFOrdLessThan  %55  %103 %106
OpSelectionMerge %108 None
OpBranchConditional %107 %109 %108
%109 = OpLabel
%110 = OpLoad  %4  %29
%111 = OpLoad  %4  %34
%112 = OpLoad  %4  %23
%113 = OpFSub  %4  %111 %112
%114 = OpFSub  %4  %110 %113
OpStore %29 %114
OpBranch %108
%108 = OpLabel
%115 = OpLoad  %4  %34
%116 = OpLoad  %4  %23
%117 = OpExtInst  %5  %1 Distance %115 %116
%119 = OpAccessChain  %90  %47 %118
%120 = OpLoad  %5  %119
%121 = OpFOrdLessThan  %55  %117 %120
OpSelectionMerge %122 None
OpBranchConditional %121 %123 %122
%123 = OpLabel
%124 = OpLoad  %4  %28
%125 = OpLoad  %4  %35
%126 = OpFAdd  %4  %124 %125
OpStore %28 %126
%127 = OpLoad  %11  %33
%128 = OpIAdd  %11  %127 %14
OpStore %33 %128
OpBranch %122
%122 = OpLabel
OpBranch %72
%72 = OpLabel
%129 = OpLoad  %3  %36
%130 = OpIAdd  %3  %129 %49
OpStore %36 %130
OpBranch %69
%70 = OpLabel
%131 = OpLoad  %11  %30
%132 = OpSGreaterThan  %55  %131 %13
OpSelectionMerge %133 None
OpBranchConditional %132 %134 %133
%134 = OpLabel
%135 = OpLoad  %4  %27
%136 = OpLoad  %11  %30
%137 = OpConvertSToF  %5  %136
%138 = OpCompositeConstruct  %4  %137 %137
%139 = OpFDiv  %4  %135 %138
%140 = OpLoad  %4  %23
%141 = OpFSub  %4  %139 %140
OpStore %27 %141
OpBranch %133
%133 = OpLabel
%142 = OpLoad  %11  %33
%143 = OpSGreaterThan  %55  %142 %13
OpSelectionMerge %144 None
OpBranchConditional %143 %145 %144
%145 = OpLabel
%146 = OpLoad  %4  %28
%147 = OpLoad  %11  %33
%148 = OpConvertSToF  %5  %147
%149 = OpCompositeConstruct  %4  %148 %148
%150 = OpFDiv  %4  %146 %149
OpStore %28 %150
OpBranch %144
%144 = OpLabel
%151 = OpLoad  %4  %26
%152 = OpLoad  %4  %27
%154 = OpAccessChain  %90  %47 %153
%155 = OpLoad  %5  %154
%156 = OpVectorTimesScalar  %4  %152 %155
%157 = OpFAdd  %4  %151 %156
%158 = OpLoad  %4  %29
%160 = OpAccessChain  %90  %47 %159
%161 = OpLoad  %5  %160
%162 = OpVectorTimesScalar  %4  %158 %161
%163 = OpFAdd  %4  %157 %162
%164 = OpLoad  %4  %28
%166 = OpAccessChain  %90  %47 %165
%167 = OpLoad  %5  %166
%168 = OpVectorTimesScalar  %4  %164 %167
%169 = OpFAdd  %4  %163 %168
OpStore %26 %169
%170 = OpLoad  %4  %26
%171 = OpExtInst  %4  %1 Normalize %170
%172 = OpLoad  %4  %26
%173 = OpExtInst  %5  %1 Length %172
%174 = OpExtInst  %5  %1 FClamp %173 %48 %50
%175 = OpVectorTimesScalar  %4  %171 %174
OpStore %26 %175
%176 = OpLoad  %4  %23
%177 = OpLoad  %4  %26
%178 = OpAccessChain  %90  %47 %46
%179 = OpLoad  %5  %178
%180 = OpVectorTimesScalar  %4  %177 %179
%181 = OpFAdd  %4  %176 %180
OpStore %23 %181
%183 = OpAccessChain  %182  %23 %46
%184 = OpLoad  %5  %183
%185 = OpFOrdLessThan  %55  %184 %51
OpSelectionMerge %186 None
OpBranchConditional %185 %187 %186
%187 = OpLabel
%188 = OpAccessChain  %182  %23 %46
OpStore %188 %52
OpBranch %186
%186 = OpLabel
%189 = OpAccessChain  %182  %23 %46
%190 = OpLoad  %5  %189
%191 = OpFOrdGreaterThan  %55  %190 %52
OpSelectionMerge %192 None
OpBranchConditional %191 %193 %192
%193 = OpLabel
%194 = OpAccessChain  %182  %23 %46
OpStore %194 %51
OpBranch %192
%192 = OpLabel
%195 = OpAccessChain  %182  %23 %49
%196 = OpLoad  %5  %195
%197 = OpFOrdLessThan  %55  %196 %51
OpSelectionMerge %198 None
OpBranchConditional %197 %199 %198
%199 = OpLabel
%200 = OpAccessChain  %182  %23 %49
OpStore %200 %52
OpBranch %198
%198 = OpLabel
%201 = OpAccessChain  %182  %23 %49
%202 = OpLoad  %5  %201
%203 = OpFOrdGreaterThan  %55  %202 %52
OpSelectionMerge %204 None
OpBranchConditional %203 %205 %204
%205 = OpLabel
%206 = OpAccessChain  %182  %23 %49
OpStore %206 %51
OpBranch %204
%204 = OpLabel
%207 = OpLoad  %4  %23
%208 = OpAccessChain  %61  %22 %46 %54 %46
OpStore %208 %207
%209 = OpLoad  %4  %26
%210 = OpAccessChain  %61  %22 %46 %54 %49
OpStore %210 %209
OpReturn
OpFunctionEnd