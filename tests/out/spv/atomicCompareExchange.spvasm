; SPIR-V
; Version: 1.1
; Generator: rspirv
; Bound: 122
OpCapability Shader
OpExtension "SPV_KHR_storage_buffer_storage_class"
%1 = OpExtInstImport "GLSL.std.450"
OpMemoryModel Logical GLSL450
OpEntryPoint GLCompute %18 "test_atomic_compare_exchange_i32"
OpEntryPoint GLCompute %76 "test_atomic_compare_exchange_u32"
OpExecutionMode %18 LocalSize 1 1 1
OpExecutionMode %76 LocalSize 1 1 1
OpDecorate %5 ArrayStride 4
OpDecorate %7 ArrayStride 4
OpMemberDecorate %9 0 Offset 0
OpMemberDecorate %9 1 Offset 4
OpMemberDecorate %10 0 Offset 0
OpMemberDecorate %10 1 Offset 4
OpDecorate %11 DescriptorSet 0
OpDecorate %11 Binding 0
OpDecorate %12 Block
OpMemberDecorate %12 0 Offset 0
OpDecorate %14 DescriptorSet 0
OpDecorate %14 Binding 1
OpDecorate %15 Block
OpMemberDecorate %15 0 Offset 0
%2 = OpTypeVoid
%3 = OpTypeInt 32 0
%4 = OpTypeInt 32 1
%6 = OpConstant  %3  128
%5 = OpTypeArray %4 %6
%7 = OpTypeArray %3 %6
%8 = OpTypeBool
%9 = OpTypeStruct %4 %8
%10 = OpTypeStruct %3 %8
%12 = OpTypeStruct %5
%13 = OpTypePointer StorageBuffer %12
%11 = OpVariable  %13  StorageBuffer
%15 = OpTypeStruct %7
%16 = OpTypePointer StorageBuffer %15
%14 = OpVariable  %16  StorageBuffer
%19 = OpTypeFunction %2
%20 = OpTypePointer StorageBuffer %5
%21 = OpConstant  %3  0
%23 = OpConstantFalse  %8
%24 = OpTypeFloat 32
%25 = OpConstant  %24  1.0
%26 = OpConstant  %3  1
%28 = OpTypePointer Function %3
%30 = OpTypePointer Function %4
%31 = OpConstantNull  %4
%33 = OpTypePointer Function %8
%46 = OpTypePointer StorageBuffer %4
%49 = OpConstant  %4  1
%50 = OpConstant  %3  64
%77 = OpTypePointer StorageBuffer %7
%81 = OpConstantNull  %3
%95 = OpTypePointer StorageBuffer %3
%18 = OpFunction  %2  None %19
%17 = OpLabel
%27 = OpVariable  %28  Function %21
%29 = OpVariable  %30  Function %31
%32 = OpVariable  %33  Function %23
%22 = OpAccessChain  %20  %11 %21
OpBranch %34
%34 = OpLabel
OpBranch %35
%35 = OpLabel
OpLoopMerge %36 %38 None
OpBranch %37
%37 = OpLabel
%39 = OpLoad  %3  %27
%40 = OpULessThan  %8  %39 %6
OpSelectionMerge %41 None
OpBranchConditional %40 %41 %42
%42 = OpLabel
OpBranch %36
%41 = OpLabel
OpBranch %43
%43 = OpLabel
%45 = OpLoad  %3  %27
%47 = OpAccessChain  %46  %22 %45
%48 = OpAtomicLoad  %4  %47 %49 %50
OpStore %29 %48
OpStore %32 %23
OpBranch %51
%51 = OpLabel
OpLoopMerge %52 %54 None
OpBranch %53
%53 = OpLabel
%55 = OpLoad  %8  %32
%56 = OpLogicalNot  %8  %55
OpSelectionMerge %57 None
OpBranchConditional %56 %57 %58
%58 = OpLabel
OpBranch %52
%57 = OpLabel
OpBranch %59
%59 = OpLabel
%61 = OpLoad  %4  %29
%62 = OpBitcast  %24  %61
%63 = OpFAdd  %24  %62 %25
%64 = OpBitcast  %4  %63
%65 = OpLoad  %3  %27
%66 = OpLoad  %4  %29
%68 = OpAccessChain  %46  %22 %65
%69 = OpAtomicCompareExchange  %4  %68 %49 %50 %50 %64 %66
%70 = OpIEqual  %8  %69 %66
%67 = OpCompositeConstruct  %9  %69 %70
%71 = OpCompositeExtract  %4  %67 0
OpStore %29 %71
%72 = OpCompositeExtract  %8  %67 1
OpStore %32 %72
OpBranch %60
%60 = OpLabel
OpBranch %54
%54 = OpLabel
OpBranch %51
%52 = OpLabel
OpBranch %44
%44 = OpLabel
OpBranch %38
%38 = OpLabel
%73 = OpLoad  %3  %27
%74 = OpIAdd  %3  %73 %26
OpStore %27 %74
OpBranch %35
%36 = OpLabel
OpReturn
OpFunctionEnd
%76 = OpFunction  %2  None %19
%75 = OpLabel
%79 = OpVariable  %28  Function %21
%80 = OpVariable  %28  Function %81
%82 = OpVariable  %33  Function %23
%78 = OpAccessChain  %77  %14 %21
OpBranch %83
%83 = OpLabel
OpBranch %84
%84 = OpLabel
OpLoopMerge %85 %87 None
OpBranch %86
%86 = OpLabel
%88 = OpLoad  %3  %79
%89 = OpULessThan  %8  %88 %6
OpSelectionMerge %90 None
OpBranchConditional %89 %90 %91
%91 = OpLabel
OpBranch %85
%90 = OpLabel
OpBranch %92
%92 = OpLabel
%94 = OpLoad  %3  %79
%96 = OpAccessChain  %95  %78 %94
%97 = OpAtomicLoad  %3  %96 %49 %50
OpStore %80 %97
OpStore %82 %23
OpBranch %98
%98 = OpLabel
OpLoopMerge %99 %101 None
OpBranch %100
%100 = OpLabel
%102 = OpLoad  %8  %82
%103 = OpLogicalNot  %8  %102
OpSelectionMerge %104 None
OpBranchConditional %103 %104 %105
%105 = OpLabel
OpBranch %99
%104 = OpLabel
OpBranch %106
%106 = OpLabel
%108 = OpLoad  %3  %80
%109 = OpBitcast  %24  %108
%110 = OpFAdd  %24  %109 %25
%111 = OpBitcast  %3  %110
%112 = OpLoad  %3  %79
%113 = OpLoad  %3  %80
%115 = OpAccessChain  %95  %78 %112
%116 = OpAtomicCompareExchange  %3  %115 %49 %50 %50 %111 %113
%117 = OpIEqual  %8  %116 %113
%114 = OpCompositeConstruct  %10  %116 %117
%118 = OpCompositeExtract  %3  %114 0
OpStore %80 %118
%119 = OpCompositeExtract  %8  %114 1
OpStore %82 %119
OpBranch %107
%107 = OpLabel
OpBranch %101
%101 = OpLabel
OpBranch %98
%99 = OpLabel
OpBranch %93
%93 = OpLabel
OpBranch %87
%87 = OpLabel
%120 = OpLoad  %3  %79
%121 = OpIAdd  %3  %120 %26
OpStore %79 %121
OpBranch %84
%85 = OpLabel
OpReturn
OpFunctionEnd