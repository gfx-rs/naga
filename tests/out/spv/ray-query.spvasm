; SPIR-V
; Version: 1.4
; Generator: rspirv
; Bound: 98
OpCapability Shader
OpCapability RayQueryKHR
OpExtension "SPV_KHR_ray_query"
%1 = OpExtInstImport "GLSL.std.450"
OpMemoryModel Logical GLSL450
OpEntryPoint GLCompute %44 "main" %18 %20
OpExecutionMode %44 LocalSize 1 1 1
OpMemberDecorate %7 0 Offset 0
OpMemberDecorate %7 1 Offset 16
OpMemberDecorate %11 0 Offset 0
OpMemberDecorate %11 1 Offset 4
OpMemberDecorate %11 2 Offset 8
OpMemberDecorate %11 3 Offset 12
OpMemberDecorate %11 4 Offset 16
OpMemberDecorate %11 5 Offset 20
OpMemberDecorate %11 6 Offset 24
OpMemberDecorate %11 7 Offset 28
OpMemberDecorate %11 8 Offset 36
OpMemberDecorate %11 9 Offset 48
OpMemberDecorate %11 9 ColMajor
OpMemberDecorate %11 9 MatrixStride 16
OpMemberDecorate %11 10 Offset 112
OpMemberDecorate %11 10 ColMajor
OpMemberDecorate %11 10 MatrixStride 16
OpMemberDecorate %14 0 Offset 0
OpMemberDecorate %14 1 Offset 4
OpMemberDecorate %14 2 Offset 8
OpMemberDecorate %14 3 Offset 12
OpMemberDecorate %14 4 Offset 16
OpMemberDecorate %14 5 Offset 32
OpDecorate %18 DescriptorSet 0
OpDecorate %18 Binding 0
OpDecorate %20 DescriptorSet 0
OpDecorate %20 Binding 1
OpDecorate %21 Block
OpMemberDecorate %21 0 Offset 0
%2 = OpTypeVoid
%3 = OpTypeAccelerationStructureNV
%4 = OpTypeInt 32 0
%6 = OpTypeFloat 32
%5 = OpTypeVector %6 3
%7 = OpTypeStruct %4 %5
%8 = OpTypeVector %6 2
%9 = OpTypeBool
%10 = OpTypeMatrix %5 4
%11 = OpTypeStruct %4 %6 %4 %4 %4 %4 %4 %8 %9 %10 %10
%12 = OpTypeVector %6 4
%13 = OpTypeRayQueryKHR
%14 = OpTypeStruct %4 %4 %6 %6 %5 %5
%16 = OpTypeInt 32 1
%15 = OpConstant  %16  0
%17 = OpConstant  %16  1
%19 = OpTypePointer UniformConstant %3
%18 = OpVariable  %19  UniformConstant
%21 = OpTypeStruct %7
%22 = OpTypePointer StorageBuffer %21
%20 = OpVariable  %22  StorageBuffer
%27 = OpTypeFunction %5 %5 %11
%28 = OpConstant  %6  1.0
%29 = OpConstant  %6  2.4
%30 = OpConstant  %6  0.0
%45 = OpTypeFunction %2
%47 = OpTypePointer StorageBuffer %7
%48 = OpConstant  %4  0
%50 = OpConstantComposite  %5  %30 %28 %30
%51 = OpConstant  %4  4
%52 = OpConstant  %4  255
%53 = OpConstant  %6  0.1
%54 = OpConstant  %6  100.0
%55 = OpConstantComposite  %5  %30 %30 %30
%56 = OpConstantComposite  %14  %51 %52 %53 %54 %55 %50
%58 = OpTypePointer Function %13
%75 = OpConstant  %4  1
%88 = OpTypePointer StorageBuffer %4
%93 = OpTypePointer StorageBuffer %5
%26 = OpFunction  %5  None %27
%24 = OpFunctionParameter  %5
%25 = OpFunctionParameter  %11
%23 = OpLabel
OpBranch %31
%31 = OpLabel
%32 = OpCompositeExtract  %10  %25 10
%33 = OpCompositeConstruct  %12  %24 %28
%34 = OpMatrixTimesVector  %5  %32 %33
%35 = OpVectorShuffle  %8  %34 %34 0 1
%36 = OpExtInst  %8  %1 Normalize %35
%37 = OpVectorTimesScalar  %8  %36 %29
%38 = OpCompositeExtract  %10  %25 9
%39 = OpCompositeConstruct  %12  %37 %30 %28
%40 = OpMatrixTimesVector  %5  %38 %39
%41 = OpFSub  %5  %24 %40
%42 = OpExtInst  %5  %1 Normalize %41
OpReturnValue %42
OpFunctionEnd
%44 = OpFunction  %2  None %45
%43 = OpLabel
%57 = OpVariable  %58  Function
%46 = OpLoad  %3  %18
%49 = OpAccessChain  %47  %20 %48
OpBranch %59
%59 = OpLabel
%60 = OpCompositeExtract  %4  %56 0
%61 = OpCompositeExtract  %4  %56 1
%62 = OpCompositeExtract  %6  %56 2
%63 = OpCompositeExtract  %6  %56 3
%64 = OpCompositeExtract  %5  %56 4
%65 = OpCompositeExtract  %5  %56 5
OpRayQueryInitializeKHR %57 %46 %60 %61 %64 %62 %65 %63
OpBranch %66
%66 = OpLabel
OpLoopMerge %67 %69 None
OpBranch %68
%68 = OpLabel
%70 = OpRayQueryProceedKHR  %9  %57
OpSelectionMerge %71 None
OpBranchConditional %70 %71 %72
%72 = OpLabel
OpBranch %67
%71 = OpLabel
OpBranch %73
%73 = OpLabel
OpBranch %74
%74 = OpLabel
OpBranch %69
%69 = OpLabel
OpBranch %66
%67 = OpLabel
%76 = OpRayQueryGetIntersectionTypeKHR  %4  %57 %75
%77 = OpRayQueryGetIntersectionInstanceCustomIndexKHR  %4  %57 %75
%78 = OpRayQueryGetIntersectionInstanceIdKHR  %4  %57 %75
%79 = OpRayQueryGetIntersectionInstanceShaderBindingTableRecordOffsetKHR  %4  %57 %75
%80 = OpRayQueryGetIntersectionGeometryIndexKHR  %4  %57 %75
%81 = OpRayQueryGetIntersectionPrimitiveIndexKHR  %4  %57 %75
%82 = OpRayQueryGetIntersectionTKHR  %6  %57 %75
%83 = OpRayQueryGetIntersectionBarycentricsKHR  %8  %57 %75
%84 = OpRayQueryGetIntersectionFrontFaceKHR  %9  %57 %75
%85 = OpRayQueryGetIntersectionObjectToWorldKHR  %10  %57 %75
%86 = OpRayQueryGetIntersectionWorldToObjectKHR  %10  %57 %75
%87 = OpCompositeConstruct  %11  %76 %82 %77 %78 %79 %80 %81 %83 %84 %85 %86
%89 = OpCompositeExtract  %4  %87 0
%90 = OpIEqual  %9  %89 %48
%91 = OpSelect  %4  %90 %75 %48
%92 = OpAccessChain  %88  %49 %48
OpStore %92 %91
%94 = OpCompositeExtract  %6  %87 1
%95 = OpVectorTimesScalar  %5  %50 %94
%96 = OpFunctionCall  %5  %26 %95 %87
%97 = OpAccessChain  %93  %49 %75
OpStore %97 %96
OpReturn
OpFunctionEnd