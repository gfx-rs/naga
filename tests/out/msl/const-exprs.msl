// language: metal2.0
#include <metal_stdlib>
#include <simd/simd.h>

using metal::uint;

constant int FOUR = 4;

void swizzle_of_compose(
    device metal::int4& out
) {
    metal::int2 a = metal::int2(1, 2);
    metal::int2 b = metal::int2(3, 4);
    out = metal::int4(4, 3, 2, 1);
    return;
}

void index_of_compose(
    device int& out2_
) {
    metal::int2 a_1 = metal::int2(1, 2);
    metal::int2 b_1 = metal::int2(3, 4);
    int _e8 = out2_;
    out2_ = _e8 + 2;
    return;
}

void compose_three_deep(
    device int& out2_
) {
    int _e8 = out2_;
    out2_ = _e8 + 6;
    return;
}

void non_constant_initializers(
    device metal::int4& out
) {
    int w = 30;
    int x = {};
    int y = {};
    int z = 70;
    int _e2 = w;
    x = _e2;
    int _e4 = x;
    y = _e4;
    int _e9 = w;
    int _e10 = x;
    int _e11 = y;
    int _e12 = z;
    metal::int4 _e14 = out;
    out = _e14 + metal::int4(_e9, _e10, _e11, _e12);
    return;
}

void splat_of_constant(
    device metal::int4& out
) {
    out = -(metal::int4(FOUR));
    return;
}

void compose_of_constant(
    device metal::int4& out
) {
    out = -(metal::int4(FOUR, FOUR, FOUR, FOUR));
    return;
}

kernel void main_(
  device metal::int4& out [[user(fake0)]]
, device int& out2_ [[user(fake0)]]
) {
    swizzle_of_compose(out);
    index_of_compose(out2_);
    compose_three_deep(out2_);
    non_constant_initializers(out);
    splat_of_constant(out);
    compose_of_constant(out);
    return;
}
